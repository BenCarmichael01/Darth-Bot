on:
 push:
   branches: [ master ]
jobs:
 deploy_job:
   runs-on: ubuntu-latest
   name: deploy
   steps:
     - name: Checkout
       uses: actions/checkout@v2

     - name: create ssh folder
       run: mkdir /home/runner/.ssh/
       
     - name: create know hosts
       run: ssh-keyscan -H 202.165.126.224 > /home/runner/.ssh/known_hosts
       
     - name: create private key
       run: touch /home/runner/.ssh/private_key.pem
       
     - name: copy private key
       run: 'echo "$SSH_KEY" > /home/runner/.ssh/private_key.pem'
       env:
         SSH_KEY: ${{secrets.SSH_PRIVATE_KEY}}
               
     - name: change permission to private key
       run: chmod 400 /home/runner/.ssh/private_key.pem
      
     - name: logging
       run: 'cat /home/runner/.ssh/private_key.pem'
                                                                                             
     - name: sftp run
       run: sftp -i /home/runner/.ssh/private_key.pem service_9146@202.165.126.224:23
